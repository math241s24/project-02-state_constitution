c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
ct_con_tidy_nostop <- ct_con_tidy %>%
anti_join(stop_words)
ct_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>% knitr::kable()
=======
library(readxl)
state_ratification_years <- read_excel("C:/Users/katie/Downloads/state ratification years.xlsx",
col_types = c("text", "numeric"))
View(state_ratification_years)
#| label: setup
#| include: false
# For better figure resolution
knitr::opts_chunk$set(
fig.retina = 3,
dpi = 300,
fig.width = 6,
fig.asp = 0.618,
out.width = "70%"
)
state_ratification_years
library(readxl)
state_ratification_years <- read_excel("C:/Users/katie/Downloads/state ratification years.xlsx",
col_types = c("text", "numeric"))
state_ratification_years
>>>>>>> Stashed changes
library(rvest)
library(dplyr)
library(tidytext)
library(stringr)
ct_url <- "https://www.cga.ct.gov/asp/Content/constitutions/1818Constitution.htm"
ct_html <- read_html(ct_url)
ct_text <- html_text(ct_html)
ct_con <- data.frame(word = unlist(strsplit(ct_text, "\\s+"))) %>%
filter(word != "")  %>%
mutate(word = str_replace_all(word, "[[:punct:][:space:]]+", "")) %>%
filter(!word=="")
rows_to_exclude_ct <- c(1:7, 223:298, 6012:12230)
ct_con_tidy <- ct_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_ct))
ct_con_join <- ct_con_tidy %>%
mutate(state = rep("Connecticut"))
ct_word_count <- ct_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
ct_con_tidy_nostop <- ct_con_tidy %>%
anti_join(stop_words)
ct_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n)
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "")  %>%
mutate(word = str_replace_all(word, "[[:punct:][:space:]]+", ""))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
library(rvest)
library(dplyr)
library(tidytext)
library(stringr)
library(ggplot2)
ct_url <- "https://www.cga.ct.gov/asp/Content/constitutions/1818Constitution.htm"
ct_html <- read_html(ct_url)
ct_text <- html_text(ct_html)
ct_con <- data.frame(word = unlist(strsplit(ct_text, "\\s+"))) %>%
filter(word != "")  %>%
mutate(word = str_replace_all(word, "[[:punct:][:space:]]+", "")) %>%
filter(!word=="")
rows_to_exclude_ct <- c(1:7, 223:298, 6012:12230)
ct_con_tidy <- ct_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_ct))
ct_con_join <- ct_con_tidy %>%
mutate(state = rep("Connecticut"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
library(rvest)
library(dplyr)
library(tidytext)
library(stringr)
library(ggplot2)
library(forcats)
ct_url <- "https://www.cga.ct.gov/asp/Content/constitutions/1818Constitution.htm"
ct_html <- read_html(ct_url)
ct_text <- html_text(ct_html)
ct_con <- data.frame(word = unlist(strsplit(ct_text, "\\s+"))) %>%
filter(word != "")  %>%
mutate(word = str_replace_all(word, "[[:punct:][:space:]]+", "")) %>%
filter(!word=="")
rows_to_exclude_ct <- c(1:7, 223:298, 6012:12230)
ct_con_tidy <- ct_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_ct))
ct_con_join <- ct_con_tidy %>%
mutate(state = rep("Connecticut"))
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "")  %>%
mutate(word = str_replace_all(word, "[[:punct:][:space:]]+", ""))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "") %>%
mutate(word = str_replace_all(word, "\\s+", ""))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "") %>%
mutate(word = str_replace_all(word, "[[:punct:][:space:]]+", ""))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "") %>%
mutate(word = str_replace_all(word, "[[:space:]]+", ""))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "") %>%
mutate(word = str_replace_all(word, "\\p{Z}+", ""))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, ""))) %>%
filter(word != "") %>%
mutate(word = str_replace_all(word, "\\s", ""))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "") %>%
mutate(word = str_trim(word))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != ""& word != "-") %>%
mutate(word = str_trim(word))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != ""& word != "–") %>%
mutate(word = str_trim(word))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "" & word != "-" & !str_detect(word, "[[:punct:]]")) %>%
mutate(word = str_trim(word))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
federal_url <- "https://www.usconstitution.net/const-html/"
federal_html <- read_html(federal_url)
federal_text <- html_text(federal_html)
federal_con <- data.frame(word = unlist(strsplit(federal_text, "\\s+"))) %>%
filter(word != "" & word != "-" & word != "=" & !str_detect(word, "[[:punct:]]")) %>%
mutate(word = str_trim(word))
rows_to_exclude_federal <- c(1:1900, 10012:11573)
federal_con_tidy <- federal_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_federal))
federal_con_join <- federal_con_tidy %>%
mutate(state = rep("Federal"))
federal_word_count <- federal_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
federal_con_tidy_nostop <- federal_con_tidy %>%
anti_join(stop_words)
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n) %>%
filter(!word%in%c("(--", " "))
federal_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
top_n(20) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = n)) +
geom_col() +
guides(fill = FALSE) +
labs(y = "Most Common Words")
va_url <- "https://www.wordservice.org/State%20Constitutions/usa1025.htm"
va_html <- read_html(va_url)
va_text <- html_text(va_html)
va_con <- data.frame(word = unlist(strsplit(va_text, "\\s+"))) %>%
filter(word != "")
rows_to_exclude_va <- c(1:201, 3680:3689)
va_con_tidy <- va_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_va))
va_con_join <- va_con_tidy %>%
mutate(state = rep("Virgina"))
library(rvest)
library(dplyr)
ct_url <- "https://www.cga.ct.gov/asp/Content/constitutions/1818Constitution.htm"
ct_html <- read_html(ct_url)
ct_text <- html_text(ct_html)
ct_con <- data.frame(word = unlist(strsplit(ct_text, "\\s+"))) %>%
filter(word != "")  %>%
mutate(word = str_replace_all(word, "[[:punct:][:space:]]+", "")) %>%
filter(!word=="")
rows_to_exclude_ct <- c(1:7, 223:298, 6012:12230)
ct_con_tidy <- ct_con %>%
mutate(word = tolower(word)) %>%
filter(!(row_number() %in% rows_to_exclude_ct))
ct_con_join <- ct_con_tidy %>%
mutate(state = rep("Connecticut"))
library(tidyverse)
library(tidytext)
ct_word_count <- ct_con_tidy %>%
filter(word %in%
c("freedom", "liberty", "welfare", "consent", "prohibit", "equality", "rights")) %>%
count(word)
data("stop_words")
ct_con_tidy_nostop <- ct_con_tidy %>%
anti_join(stop_words)
ct_con_tidy_nostop %>%
count(word, sort = TRUE) %>%
slice_max(n = 20, order_by = n)
library(shiny); runApp('stateconsapp.R')
runApp('stateconsapp.R')
runApp('stateconsapp.R')
